<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>活期黄金</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <script src="../static/js/flexible.js"></script>
    <link rel="stylesheet" href="../static/css/reset.css">
    <link rel="stylesheet" href="../static/css/currentGold.css">
    <link rel="stylesheet" href="../static/css/dropload.css">
    <style>
        div{
            font-size: 0.24rem;
        }
        .downBottonfix{
            position: fixed;
            bottom: 0;
        }
        .font32{
            font-size: 0.32rem;
        }
        .font48{
            font-size: 0.48rem;
            line-height: 0.48rem;
        }

    </style>
</head>

<body>
<div id="titleBar" flex="dir:left">
    <div id="titleBarBack" >
        <img src="../static/img/back.png" alt="" id="back" >
    </div>
    <div id="titleBarName">
        <p>黄金买入</p>
    </div>
    <div id="titleBarFunction">
        <p>我的黄金</p>
    </div>
</div>
<div class="topBox">
    <p style="font-size: 0.24rem">参考买入金价(元/克)</p>
    <p class="rgpPrice">277.95</p>
    <div>
        <span>灵活存取</span>
        <span style="margin-left: 0.12rem">零手续费</span>
    </div>
    <ul flex="dir:left main:center" style="margin-top: 0.28rem;">
        <li>期限</li>
        <li>年化生金率</li>
        <li>起购</li>
    </ul>
    <ul flex="dir:left main:center" class="bigRed">
        <li style="font-size: 0.32rem">随时买卖</li>
        <li class=""><span class="font48 DIN">1.3</span>%</li>
        <li class=""><span class="font48 DIN">0.001</span>克</li>
    </ul>
</div>
<div class="middleBox">
    <ul flex="dir:left box:mean">
        <li>
            <p class="circle"></p>
        </li>
        <li>
            <p class="circle"></p>
        </li>
        <li>
            <p class="circle"></p>
        </li>
    </ul>
    <div class="borderLeft"></div>
    <div class="borderRight"></div>
    <ul flex="dir:left box:mean">
        <li>
            <p>购买</p>
        </li>
        <li>
            <p>起息</p>
        </li>
        <li>
            <p>到账</p>
        </li>
    </ul>
    <ul flex="dir:left box:mean" style="color: #999;margin-top: 0.2rem;padding-bottom: 0.3rem">
        <li>
            <p>2017-10-03</p>
        </li>
        <li>
            <p>2017-10-03</p>
        </li>
        <li>
            <p>2017-10-03</p>
        </li>
    </ul>
</div>
<div class="bottomBox">
    <div flex="dir:left main:center">
        <p class="tap tapSelected productMes" style="margin-right: 0.48rem">产品详解</p>
        <p class="tap buyerNum" style="margin-left: 0.48rem">购买人数</p>
    </div>
    <div class="rules">
        <ul style="padding-right: 0.4rem">
            <li flex="dir:left">
                <img src="../static/img/goalKind.png" alt="">
                <div>
                    <p class="rulesTitle">黄金品种</p>
                    <p class="rulesText">纯度为<span class="DIN">99.99%</span>的现货黄金</p>
                </div>
            </li>
            <li flex="dir:left">
                <img src="../static/img/profitForm.png" alt="">
                <div>
                    <p class="rulesTitle">收益构成</p>
                    <p class="rulesText"><span class="DIN">1.99%</span>年化黄金收益 + 金价波动收益</p>
                </div>
            </li>
            <li flex="dir:left">
                <img src="../static/img/procedureFee.png" alt="">
                <div>
                    <p class="rulesTitle">手续费</p>
                    <p class="rulesText">0元/克</p>
                </div>
            </li>
            <li flex="dir:left">
                <img src="../static/img/interestRule.png" alt="">
                <div>
                    <p class="rulesTitle">计息规则</p>
                    <p class="rulesText">克重 * 年化收益率 * 期限 / 365, 利息在到账日自动转为您的活期黄金克数</p>
                </div>
            </li>
            <li flex="dir:left">
                <img src="../static/img/contractAgreement.png" alt="">
                <div>
                    <p class="rulesTitle">合同协议</p>
                    <p class="rulesText red">黄金消费综合服务协议 >></p>
                </div>
            </li>
        </ul>
    </div>
    <div class="buyerList content">
        <ul class="lists">
            <li  flex="dir:left main:justify">
                <p>139******98</p>
                <p>2017-11-11 17:56:23</p>
                <p>1克</p>
            </li>
            <li  flex="dir:left main:justify">
                <p>139******98</p>
                <p>2017-11-11 17:56:23</p>
                <p>1克</p>
            </li>
            <li  flex="dir:left main:justify">
                <p>139******98</p>
                <p>2017-11-11 17:56:23</p>
                <p>1克</p>
            </li>
            <li  flex="dir:left main:justify">
                <p>139******98</p>
                <p>2017-11-11 17:56:23</p>
                <p>1克</p>
            </li>
            <li  flex="dir:left main:justify">
                <p>139******98</p>
                <p>2017-11-11 17:56:23</p>
                <p>1克</p>
            </li>
            <li  flex="dir:left main:justify">
                <p>139******98</p>
                <p>2017-11-11 17:56:23</p>
                <p>1克</p>
            </li>
        </ul>
    </div>
</div>
<button class="downBotton next">买入</button>

<script src="../static/js/jquery-3.2.1.min.js"></script>
<script src="../static/js/util.js"></script>
<script src="../static/js/dropload.min.js"></script>
<script>
    window.onload=function () {
        util.refreshPrice($('.rgpPrice'))
    }
    var counter = 0;
    // 每页展示6个
    var num = 6;
    var pageStart = 0,pageEnd = 0;

    $('.content').dropload({
        scrollArea : $('.buyerList'),
        loadDownFn : function(me){
            //测试数据在../static/json/more.json,与后台数据字段不一致的话,直接修改就行
            $.ajax({
                type: 'GET',
                url: '../static/json/record.json',
                dataType: 'json',
                success: function(data){
                    console.log(data)
                    var result = '';
                    counter++;
                    pageEnd = num * counter;
                    pageStart = pageEnd - num;

                    for(var i = pageStart; i < pageEnd; i++){

                        result +=  '<li flex="dir:left main:justify">'
                                +'<p class="">'+data.lists[i].mobile+'</p>'
                                +'<p class="">'+data.lists[i].date+'</p>'
                                +'<p class="">'+data.lists[i].num+'克</p>'
                                +'</li>';
                        if((i + 1) >= data.lists.length){
                            // 锁定
                            me.lock();
                            // 无数据
                            me.noData();
                            break;
                        }
                    }
                    // 为了测试，延迟1秒加载
                    setTimeout(function(){
                        $('.lists').append(result);

                        // 每次数据加载完，必须重置
                        me.resetload();
                    },1000);
                },
                error: function(xhr, type){
//                    alert('Ajax error!');
                    // 即使加载出错，也得重置
                    me.resetload();
                }
            });
        }
    })
    $(function () {
        //changeTap
        $(".productMes").click(function () {
            $(this).addClass('tapSelected');
            $(".buyerNum").removeClass('tapSelected');
            $(".rules").show();
            $(".buyerList").hide();
            $('.downBotton').removeClass('downBottonfix')
        })
        $(".buyerNum").click(function () {
            $(this).addClass('tapSelected');
            $(".productMes").removeClass('tapSelected');
            $(".rules").hide();
            $(".buyerList").show();
            $('.downBotton').addClass('downBottonfix')
        })
        //toNextPage
        $(".next").click(function () {
            window.location.href = './buyCurrentGold.html'
        })
        $('#titleBarFunction').click(function () {
            window.location.href = './myGold.html'
        })

        $('.rulesText').click(function () {
            window.location.href = './goldAgreement.html'
        })
    })

</script>
</body>

</html>
